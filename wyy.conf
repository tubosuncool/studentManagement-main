#!name=网易云svip会员（完全免费不要到处分享）
#!desc=共享网易云svip会员 完全免费不要到处分享 失效群内反馈频道
#!author=暗夜[https://t.me/IPAs_share]
#!icon=https://is1-ssl.mzstatic.com/image/thumb/Purple211/v4/2d/e8/1b/2de81bfd-29a0-d067-63c3-38315cc1661a/AppIcon-1x_U007emarketing-0-9-0-0-85-220-0.png/460x0w.webp
#!homepage=https://apps.apple.com/app/id590338362
#!date=2025-11-10 00:00:00

[Mitm]
hostname = interface*.music.163.com

[Filter]
# DOMAIN 规则
# REJECT 相当于 QX 中的 reject-domain
DOMAIN,iadmat.nosdn.127.net,reject-domain
DOMAIN,iadmatapk.nosdn.127.net,reject-domain
DOMAIN,iadmusicmat.music.126.net,reject-domain
DOMAIN,iadmusicmatvideo.music.126.net,reject-domain
DOMAIN,ipv4.music.163.com,reject-domain
DOMAIN,ipv6.music.163.com,reject-domain

[Rewrite_Remote]
# Surge 的 https://ahrefs.com/writing-tools/paragraph-rewriter 和 [Map Local] 功能，在 QX 中通常通过 [Rewrite_Remote] 和 [Rewrite_Local]（或者用 QX 的脚本功能）来实现。
# 这里的 https://ahrefs.com/writing-tools/paragraph-rewriter 转换为 reject 规则。
# Surge 的 [Map Local] 功能，如果目标是返回静态 JSON/文本，可以尝试转换为 QX 的 reject/302 或静态脚本。

# --- URL Rewrite (Reject) ---
^https?://interface.*\.music\.163\.com/eapi/ad/get url reject
^https?://interface.*\.music\.163\.com/eapi/ad/config/get url reject
^https?://interface.*\.music\.163\.com/eapi/ad/iyunIds url reject
^https?://interface.*\.music\.163\.com/eapi/ad/prefetch/select url reject
^https?://interface.*\.music\.163\.com/eapi/ad/loading/current url reject

# --- Map Local (Static Response via 307/302 Redirection to Static Response) ---
# 由于 QX 的 Map Local 实现与 Surge 不同，我将这些规则转换为 QX 静态响应的等效实现。
# QX 默认没有直接的 Map Local 语法来返回 data="{}" status-code=200，
# 建议使用 QX 的 rewrite 307 重定向到 data 协议来实现静态 JSON 响应。
# data 协议：data:application/json,{}

^https?:\/\/interface\d?\.music\.163\.com\/eapi\/(?:delivery\/(batch-)?deliver|moment\/tab\/info\/|side-bar\/mini-program\/music-service\/account|yunbei\/account\/entrance\/) url 307 data:application/json,{}
^https?:\/\/interface\d?\.music\.163\.com\/eapi\/(?:community\/friends\/fans-group\/artist\/group\/|mine\/applet\/redpoint|music\/songshare\/text\/recommend\/|resniche\/position\/play\/new\/|resniche\/tspopup\/show|resource\/comments?\/musiciansaid\/|user\/sub\/artist) url 307 data:application/json,{}
^https?:\/\/interface\d?\.music\.163\.com\/eapi\/(?:ios\/version|mlivestream\/entrance\/playpage\/|link\/position\/show\/strategy|link\/scene\/show\/resource|v1\/content\/exposure\/comment\/banner\/) url 307 data:application/json,{}
^https?:\/\/interface\d?\.music\.163\.com\/w?eapi\/(?:activity\/bonus\/playpage\/time\/query|resource-exposure\/|search\/(?:chart\/|rcmd\/keyword\/|specialkeyword\/)) url 307 data:application/json,{}
^https:\/\/interface\d\.music\.163\.com\/eapi\/my\/podcast\/tab\/recommend url 307 data:application/json,{}

# Map Local: 最后一个 ad/ 和 search/default 转换为 reject (返回空数据)
^https?:\/\/interface\d?\.music\.163\.com\/e?api\/(ocpc\/)?ad\/ url reject
^https?:\/\/interface\d?\.music\.163\.com\/w?e?api\/search\/default url reject

[Script]
# Surge 的 [Script] 转换成 QX 的 [Script] 模块。
# Surge 的 type=http-request 对应 QX 的 type=request。
# QX 脚本语法：<pattern>, <script-path>, tag=<tag-name>, enabled=<true/false>, script-update-interval=<interval>
# QX 默认的 timeout 是 5 秒，这里保持不变，无需指定。

# 皮肤
^https?:\/\/interface\d?\.music\.163\.com\/eapi\/playermode\/ url request-body https://he2o.vercel.app/Resource/-Rewrite/anyehttp/wyy-s.js, tag=网易云svip-皮肤

# 歌曲、听书
^https?:\/\/interface\d?\.music\.163\.com\/eapi\/search\/(?:complex\/page|complex\/rec\/song\/get|song\/list\/page) url request-body https://he2o.vercel.app/Resource/-Rewrite/anyehttp/wyy-s.js, tag=网易云svip-歌曲/听书-1
^https?:\/\/interface\d?\.music\.163\.com\/eapi\/v3\/song\/detail url request-body https://he2o.vercel.app/Resource/-Rewrite/anyehttp/wyy-s.js, tag=网易云svip-歌曲/听书-2
^https?:\/\/interface\d?\.music\.163\.com\/eapi\/song\/(?:chorus|enhance\/|play\/|type\/detail\/get) url request-body https://he2o.vercel.app/Resource/-Rewrite/anyehttp/wyy-s.js, tag=网易云svip-歌曲/听书-3
^https?:\/\/interface\d?\.music\.163\.com\/eapi\/(?:v1\/artist\/top\/song|v3\/discovery\/recommend\/songs) url request-body https://he2o.vercel.app/Resource/-Rewrite/anyehttp/wyy-s.js, tag=网易云svip-歌曲/听书-4

# 等级
^https?:\/\/interface\d?\.music\.163\.com\/eapi\/vipnewcenter\/app\/resource\/newaccountpage url request-body https://he2o.vercel.app/Resource/-Rewrite/anyehttp/wyy-s.js, tag=网易云svip-等级

# 首页歌单
^https?:\/\/interface\d?\.music\.163\.com\/w?e?api\/(homepage\/|v6\/)?playlist\/(?!(?:delete|subscribe|unsubscribe)) url request-body https://he2o.vercel.app/Resource/-Rewrite/anyehttp/wyy-s.js, tag=网易云svip-首页歌单

# 音质
^https?:\/\/interface\d?\.music\.163\.com\/eapi\/vipauth\/app\/auth\/(soundquality\/)?query url request-body https://he2o.vercel.app/Resource/-Rewrite/anyehttp/wyy-s.js, tag=网易云svip-音质
